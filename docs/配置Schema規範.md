# é…ç½®Schemaè¦ç¯„

> **ç›®æ¨™**: ç‚ºç”Ÿæˆå™¨é…ç½®UIç³»çµ±å»ºç«‹çµ±ä¸€çš„Schemaæ ¼å¼æ¨™æº–
> **å»ºç«‹æ—¥æœŸ**: 2025-09-23
> **æ›´æ–°æ—¥æœŸ**: 2025-09-30
> **ç‹€æ…‹**: æ­£å¼è¦ç¯„

## ğŸ¯ **è¨­è¨ˆåŸå‰‡**

- **åš´æ ¼é©—è­‰**: ConfigFactoryæœƒé©—è­‰æ‰€æœ‰Schemaæ ¼å¼ï¼ŒéŒ¯èª¤æ ¼å¼ç«‹å³æ‹‹å‡ºç•°å¸¸
- **é–‹ç™¼è€…å‹å–„**: æ¸…æ™°çš„è¦ç¯„å’Œè±å¯Œçš„ç¯„ä¾‹
- **æ•™å¸«å‹å–„**: æ¨™ç±¤å’Œèªªæ˜ä½¿ç”¨æ˜“æ‡‚çš„ä¸­æ–‡è¡“èª
- **è·è²¬åˆ†é›¢**: UIå±¤é©—è­‰è¼¸å…¥ï¼Œç”Ÿæˆå™¨ä¿¡ä»»é…ç½®å€¼

---

## ğŸ“‹ **SchemaåŸºç¤æ ¼å¼**

### **é ‚å±¤çµæ§‹**
```python
@classmethod
def get_config_schema(cls) -> Dict[str, Dict[str, Any]]:
    """è¿”å›é…ç½®é …æè¿°å­—å…¸"""
    return {
        "config_field_name": {
            # é…ç½®é …å®šç¾©
        }
    }
```

### **é…ç½®é …å¿…éœ€æ¬„ä½**
| æ¬„ä½ | é¡å‹ | å¿…éœ€ | èªªæ˜ |
|------|------|------|------|
| `type` | str | âœ… | æ§ä»¶é¡å‹ï¼ˆselect, number_input, checkbox, percentage_groupï¼‰ |
| `label` | str | âœ… | ç”¨æˆ¶ç•Œé¢é¡¯ç¤ºçš„æ¨™ç±¤æ–‡å­— |
| `default` | Any | âœ… | é è¨­å€¼ï¼Œå¿…é ˆèˆ‡æ§ä»¶é¡å‹å…¼å®¹ |

### **é…ç½®é …å¯é¸æ¬„ä½**
| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| `description` | str | è©³ç´°èªªæ˜æ–‡å­—ï¼Œé¡¯ç¤ºç‚ºæç¤º |

---

## ğŸ”§ **æ”¯æ´çš„æ§ä»¶é¡å‹**

### **1. select - ä¸‹æ‹‰é¸æ“‡æ¡†**

#### **æ ¼å¼å®šç¾©**
```python
{
    "type": "select",
    "label": "é¡¯ç¤ºæ¨™ç±¤",
    "default": "é è¨­é¸é …",
    "options": ["é¸é …1", "é¸é …2", "é¸é …3"],  # å¿…éœ€
    "description": "å¯é¸çš„è©³ç´°èªªæ˜"
}
```

#### **é©—è­‰è¦å‰‡**
- âœ… `options` å¿…éœ€ï¼Œä¸”ç‚ºéç©ºåˆ—è¡¨
- âœ… `default` å¿…éœ€ï¼Œä¸”å¿…é ˆåœ¨ `options` ä¸­
- âœ… `options` ä¸­ä¸èƒ½æœ‰é‡è¤‡é …ç›®

#### **ç¯„ä¾‹**
```python
"function_scope": {
    "type": "select",
    "label": "å‡½æ•¸ç¯„åœ",
    "default": "basic",
    "options": ["basic", "extended"],
    "description": "basicåŒ…å«sin,cos,tanï¼›extendedé¡å¤–åŒ…å«cot,sec,csc"
}
```

---

### **2. number_input - æ•¸å­—è¼¸å…¥æ¡†**

#### **æ ¼å¼å®šç¾©**
```python
{
    "type": "number_input",
    "label": "é¡¯ç¤ºæ¨™ç±¤",
    "default": æ•¸å­—å€¼,
    "min": æœ€å°å€¼,                    # å¯é¸
    "max": æœ€å¤§å€¼,                    # å¯é¸
    "description": "å¯é¸çš„è©³ç´°èªªæ˜"
}
```

#### **é©—è­‰è¦å‰‡**
- âœ… `default` å¿…éœ€ï¼Œä¸”ç‚ºæ•´æ•¸é¡å‹
- âœ… å¦‚æŒ‡å®š `min`/`max`ï¼Œ`default` å¿…é ˆåœ¨ç¯„åœå…§

#### **ç¯„ä¾‹**
```python
"max_value": {
    "type": "number_input",
    "label": "æ•¸å€¼ä¸Šé™",
    "default": 25,
    "min": 5,
    "max": 100,
    "description": "æ§åˆ¶ç”Ÿæˆç­”æ¡ˆæ•¸å­—çš„æœ€å¤§å€¼"
}
```

---

### **3. checkbox - å‹¾é¸æ¡†**

#### **æ ¼å¼å®šç¾©**
```python
{
    "type": "checkbox",
    "label": "é¡¯ç¤ºæ¨™ç±¤",
    "default": True | False,
    "description": "å¯é¸çš„è©³ç´°èªªæ˜"
}
```

#### **é©—è­‰è¦å‰‡**
- âœ… `default` å¿…éœ€ï¼Œä¸”ç‚ºå¸ƒæ—å€¼

#### **ç¯„ä¾‹**
```python
"allow_negative": {
    "type": "checkbox",
    "label": "å…è¨±è² æ•¸",
    "default": False,
    "description": "æ˜¯å¦å…è¨±ç”Ÿæˆè² æ•¸ç­”æ¡ˆ"
}
```

---

### **4. percentage_group - ç™¾åˆ†æ¯”åˆ†é…æ§ä»¶**

#### **è¨­è¨ˆç†å¿µ**
- è™•ç†å¤šå€‹æ•¸å€¼å¿…é ˆç¸½å’Œ=100%çš„å ´æ™¯
- ä½¿ç”¨å½ˆå‡ºå°è©±æ¡†æä¾›å……è¶³çš„é…ç½®ç©ºé–“
- UIå±¤å¼·åˆ¶é©—è­‰ç¸½å’Œ=100%ï¼Œç”Ÿæˆå™¨ç›´æ¥ä½¿ç”¨

#### **æ ¼å¼å®šç¾©**
```python
{
    "type": "percentage_group",
    "label": "çµ„åˆæ¨™ç±¤",
    "description": "è©³ç´°èªªæ˜",
    "items": {
        "item1_name": {
            "label": "é …ç›®1æ¨™ç±¤",
            "default": æ•¸å­—å€¼
        },
        "item2_name": {
            "label": "é …ç›®2æ¨™ç±¤",
            "default": æ•¸å­—å€¼
        }
        # ... å¯ä»¥æœ‰Nå€‹é …ç›®
    }
}
```

#### **é©—è­‰è¦å‰‡**
- âœ… `items` å¿…éœ€ï¼Œä¸”è‡³å°‘åŒ…å«2å€‹é …ç›®
- âœ… æ‰€æœ‰é …ç›®çš„ `default` ç¸½å’Œå¿…é ˆç­‰æ–¼100
- âœ… æ‰€æœ‰é …ç›®å¿…é ˆåŒ…å« `label` å’Œ `default`
- âœ… `default` å€¼å¿…é ˆç‚ºæ­£æ•´æ•¸

#### **ç¯„ä¾‹**
```python
"mode_weights": {
    "type": "percentage_group",
    "label": "é¡Œå‹æ¯”ä¾‹åˆ†é…",
    "description": "èª¿æ•´ä¸‰ç¨®é¡Œå‹çš„å‡ºç¾é »ç‡ï¼Œç¸½å’Œè‡ªå‹•ä¿æŒç‚º100%",
    "items": {
        "original": {
            "label": "0~90Â°è½‰æ›",
            "default": 70
        },
        "formula": {
            "label": "å…¬å¼å•ç­”",
            "default": 10
        },
        "narrow_angle": {
            "label": "éŠ³è§’è¨ˆç®—",
            "default": 20
        }
    }
}
```

---

## ğŸ“š **é–‹ç™¼è€…æŒ‡å—**

### **æœ€ä½³å¯¦è¸**
1. **ç°¡å–®å„ªå…ˆ**: èƒ½ç”¨selectå°±ä¸ç”¨percentage_group
2. **æ¸…æ™°æ¨™ç±¤**: labelè¦è®“æ•™å¸«ä¸€çœ‹å°±æ‡‚
3. **åˆç†é è¨­å€¼**: defaultæ‡‰è©²æ˜¯æœ€å¸¸ç”¨çš„é¸é …
4. **é©ç•¶æè¿°**: descriptionè§£é‡‹é¸é …çš„å¯¦éš›å½±éŸ¿

### **å¸¸è¦‹éŒ¯èª¤**
âŒ **ç¼ºå°‘options**: selecté¡å‹æ²’æœ‰æä¾›é¸é …åˆ—è¡¨
âŒ **é è¨­å€¼éŒ¯èª¤**: defaultä¸åœ¨optionsç¯„åœå…§
âŒ **percentageç¸½å’ŒéŒ¯èª¤**: æ‰€æœ‰é …ç›®defaultç¸½å’Œä¸ç­‰æ–¼100

### **ç¯„ä¾‹æ¨¡æ¿**
```python
@classmethod
def get_config_schema(cls):
    """æ¨™æº–é…ç½®æè¿°æ¨¡æ¿"""
    return {
        # ç°¡å–®é¸æ“‡
        "mode": {
            "type": "select",
            "label": "æ¨¡å¼é¸æ“‡",
            "default": "normal",
            "options": ["easy", "normal", "hard"],
            "description": "é¸æ“‡é¡Œç›®é›£åº¦ç´šåˆ¥"
        },

        # æ•¸å­—è¼¸å…¥
        "max_value": {
            "type": "number_input",
            "label": "æ•¸å€¼ä¸Šé™",
            "default": 10,
            "min": 1,
            "max": 50
        },

        # é–‹é—œé¸é …
        "show_steps": {
            "type": "checkbox",
            "label": "é¡¯ç¤ºè§£é¡Œæ­¥é©Ÿ",
            "default": True
        }
    }
```

---

## ğŸ”— **ç›¸é—œæ–‡æª”**

- [ç”Ÿæˆå™¨é–‹ç™¼æŒ‡å—.md](ç”Ÿæˆå™¨é–‹ç™¼æŒ‡å—.md) - å®Œæ•´çš„ç”Ÿæˆå™¨é–‹ç™¼æµç¨‹
- [é…ç½®æ§ä»¶æ“´å±•æŒ‡å—.md](é…ç½®æ§ä»¶æ“´å±•æŒ‡å—.md) - ConfigFactoryå¯¦ç¾ç´°ç¯€

**å…¸ç¯„ç”Ÿæˆå™¨åƒè€ƒ**:
- `generators/algebra/double_radical_simplification.py` - number_inputç¯„ä¾‹
- `generators/trigonometry/TrigAngleConversionGenerator.py` - percentage_groupç¯„ä¾‹
- `generators/trigonometry/TrigonometricFunctionGenerator.py` - selectç¯„ä¾‹

---

**æ³¨æ„**: ConfigFactoryæœƒåœ¨UIå±¤å®Œæˆæ‰€æœ‰é©—è­‰ï¼Œç”Ÿæˆå™¨åªéœ€ä½¿ç”¨ç°¡å–®çš„ `options.get(key, default)` æ¨¡å¼è®€å–é…ç½®å€¼ï¼Œç„¡éœ€é‡è¤‡é©—è­‰ã€‚
