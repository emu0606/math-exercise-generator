# ç”Ÿæˆå™¨é–‹ç™¼æŒ‡å—

> **ç›®æ¨™**: è®“å·¥ç¨‹å¸«å¿«é€Ÿç†è§£å¦‚ä½•é–‹ç™¼æ•¸å­¸ç”Ÿæˆå™¨
> **å»ºç«‹æ—¥æœŸ**: 2025-09-29
> **é©ç”¨**: æ•¸å­¸æ¸¬é©—ç”Ÿæˆå™¨å°ˆæ¡ˆ

## 1. é–‹ç™¼æµç¨‹

### åŸºæœ¬æ­¥é©Ÿ
1. **å»ºç«‹ç”Ÿæˆå™¨æª”æ¡ˆ**: åœ¨ `generators/category/` ä¸‹å»ºç«‹ `.py` æª”æ¡ˆ
2. **ç¹¼æ‰¿åŸºé¡**: å¾ `QuestionGenerator` ç¹¼æ‰¿
3. **åŠ ä¸Šè£é£¾å™¨**: ä½¿ç”¨ `@register_generator` è‡ªå‹•è¨»å†Š
4. **å¯¦ä½œå¿…è¦æ–¹æ³•**: `_generate_core_question()` å’Œ `_get_fallback_question()` æŠ½è±¡æ–¹æ³•
5. **è¨­å®šé…ç½®é¸é …**: å¯¦ä½œ `get_config_schema()` æ–¹æ³•ï¼ˆå¯é¸ï¼‰

### æœ€å°å¯ç”¨éª¨æ¶
```python
#!/usr/bin/env python
# -*- coding: utf-8 -*-

from typing import Dict, Any
from utils import get_logger
from ..base import QuestionGenerator, QuestionSize, register_generator

@register_generator
class YourGenerator(QuestionGenerator):

    def __init__(self, options=None):
        super().__init__(options)
        self.logger = get_logger(self.__class__.__name__)

    def _generate_core_question(self) -> Dict[str, Any]:
        """æ ¸å¿ƒç”Ÿæˆé‚è¼¯ï¼Œå¯¦ç¾å…·é«”çš„é¡Œç›®ç”Ÿæˆ"""
        return {
            "question": "ä½ çš„é¡Œç›®LaTeX",
            "answer": "ç­”æ¡ˆLaTeX",
            "explanation": "è§£é‡‹LaTeX",
            **self._get_standard_metadata()
        }

    def _get_fallback_question(self) -> Dict[str, Any]:
        """å¾Œå‚™é¡Œç›®ï¼Œç•¶æ ¸å¿ƒç”Ÿæˆå¤±æ•—æ™‚ä½¿ç”¨"""
        return {
            "question": "å®‰å…¨çš„é è¨­é¡Œç›®LaTeX",
            "answer": "é è¨­ç­”æ¡ˆLaTeX",
            "explanation": "é è¨­è§£é‡‹LaTeX",
            **self._get_standard_metadata()
        }

    def get_question_size(self):
        return QuestionSize.MEDIUM

    def get_category(self):
        return "ä½ çš„ä¸»é¡åˆ¥"

    def get_subcategory(self):
        return "ä½ çš„å­é¡åˆ¥"

    def get_grade(self):
        return "G10S1"  # æ ¼å¼: Gå¹´ç´šSå­¸æœŸ
```

### é©—è­‰ç”Ÿæˆå™¨
åŸ·è¡Œ `python main.py` ç¢ºèªï¼š
- ç”Ÿæˆå™¨å‡ºç¾åœ¨UIçš„é¡åˆ¥é¸å–®ä¸­
- èƒ½æ­£å¸¸ç”Ÿæˆé¡Œç›®
- é…ç½®é¸é …æ­£å¸¸é‹ä½œï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰

## 2. æ–°æ¶æ§‹æœ€ä½³å¯¦è¸

### âœ… å¿…é ˆéµå¾ªçš„æ¨™æº–

#### **Sphinx Docstring æ¨™æº–**
æ‰€æœ‰é¡åˆ¥ã€æ–¹æ³•å¿…é ˆåŒ…å«å®Œæ•´ docstringï¼Œä½¿ç”¨ Google Style æ ¼å¼ï¼š
```python
class YourGenerator(QuestionGenerator):
    """é¡Œç›®ç”Ÿæˆå™¨ç°¡çŸ­æè¿°

    è©³ç´°èªªæ˜ç”Ÿæˆå™¨çš„åŠŸèƒ½å’Œç”¨é€”ã€‚

    Args:
        options (Dict[str, Any], optional): ç”Ÿæˆå™¨é…ç½®é¸é …
            param1 (str): åƒæ•¸1èªªæ˜ï¼Œé è¨­"default"
            param2 (int): åƒæ•¸2èªªæ˜ï¼Œé è¨­10

    Returns:
        Dict[str, Any]: åŒ…å«å®Œæ•´é¡Œç›®è³‡è¨Šçš„å­—å…¸

    Example:
        >>> generator = YourGenerator()
        >>> question = generator.generate_question()
        >>> print(question['question'])
        ç¯„ä¾‹é¡Œç›®è¼¸å‡º
    """

    def generate_question(self) -> Dict[str, Any]:
        """ç”Ÿæˆä¸€å€‹å®Œæ•´çš„é¡Œç›®

        è©³ç´°èªªæ˜ç”Ÿæˆé‚è¼¯å’Œæ³¨æ„äº‹é …ã€‚

        Returns:
            Dict[str, Any]: åŒ…å«é¡Œç›®ã€ç­”æ¡ˆã€è§£é‡‹ç­‰å®Œæ•´è³‡è¨Š

        Raises:
            ValueError: ç•¶åƒæ•¸ç„¡æ•ˆæ™‚æ‹‹å‡º
        """
        pass
```

#### **çµ±ä¸€ API ä½¿ç”¨**
ä½¿ç”¨æ–°æ¶æ§‹çš„çµ±ä¸€å°å…¥å’Œæ•¸æ“šé¡å‹ï¼š
```python
from utils import (
    get_logger, global_config,          # æ ¸å¿ƒå·¥å…·
    Point, Triangle, distance,          # å¹¾ä½•å·¥å…·
    tikz_coordinate, ArcRenderer        # TikZå·¥å…·
)
from generators.base import QuestionGenerator, QuestionSize, register_generator

# ä½¿ç”¨çµ±ä¸€æ—¥èªŒå™¨
self.logger = get_logger(self.__class__.__name__)

# ç²å–å…¨åŸŸè¨­å®š
self.debug_mode = global_config.debug_mode
self.precision = global_config.tikz_precision
```

#### **æ•¸å­¸ç²¾ç¢ºæ€§è¦æ±‚**
**ä½¿ç”¨ sympy é€²è¡Œç¬¦è™Ÿè¨ˆç®—å’Œ LaTeX è¦ç¯„åŒ–**:
```python
from sympy import sqrt, pi, sin, cos, latex, simplify

def generate_question(self):
    # ä½¿ç”¨ sympy é€²è¡Œç¬¦è™Ÿè¨ˆç®—
    angle_rad = angle_deg * pi / 180
    result = simplify(sin(angle_rad))  # ç¬¦è™Ÿé‹ç®—ï¼Œä¿æŒæ ¹å¼å½¢å¼

    return {
        "question": f"$\\sin({angle_deg}^\\circ) = $",
        "answer": f"${latex(result)}$",  # æ¨™æº–åŒ–çš„LaTeXè¼¸å‡º
        # ...
    }
```

#### **è‡ªå‹•è¨»å†Šæ©Ÿåˆ¶**
ä½¿ç”¨æ¨™æº–çš„è¨»å†Šæ¨¡å¼ï¼š
```python
@register_generator  # è‡ªå‹•è¨»å†Šè£é£¾å™¨
class YourGenerator(QuestionGenerator):

    def get_category(self):
        return "æ•¸èˆ‡å¼"  # ä½¿ç”¨æ¨™æº–åˆ†é¡

    def get_subcategory(self):
        return "ä»£æ•¸é‹ç®—"
```

## 3. é¡Œç›®å–å€¼æ–¹æ¡ˆè¨­è¨ˆ â­ æ ¸å¿ƒé‡é»

> **é‡è¦ç†å¿µ**: é¡Œç›®å–å€¼æ–¹æ¡ˆæ˜¯ç”Ÿæˆå™¨æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œè¦è©³ç´°æ€è€ƒå’Œè¨è«–å†æ±ºå®š
> **è¨­è¨ˆåŸå‰‡**: å¤šè®Šä½†ä¸è¤‡é›œï¼Œä¸èƒ½è®“å­¸ç”Ÿæ²’è¾¦æ³•ç®—ï¼Œé¿å…æƒ³ç•¶ç„¶çš„éš¨æ©Ÿå‡ºé¡Œ

### ç­–ç•¥1: ç­”æ¡ˆé€†æ¨æ³•ï¼ˆæ¨è–¦ç”¨æ–¼è¤‡é›œè¨ˆç®—é¡Œï¼‰
**ä»£è¡¨ç¯„ä¾‹**: `DoubleRadicalSimplificationGenerator`
**æ ¸å¿ƒæ€æƒ³**: å…ˆæ±ºå®šå¥½çœ‹çš„ç­”æ¡ˆï¼Œå†é€†æ¨åˆ°é¡Œç›®ï¼Œéç¨‹ä¿ç•™æ‰€æœ‰æ•¸å€¼

```python
# å¯¦éš›ä»£ç¢¼ç‰‡æ®µï¼šé›™é‡æ ¹è™Ÿç”Ÿæˆå™¨
def _build_valid_combinations(self):
    """é ç¯©é¸æ‰€æœ‰æœ‰æ•ˆçµ„åˆï¼Œç¢ºä¿ç­”æ¡ˆæ¼‚äº®"""
    from itertools import combinations

    self.valid_pairs = [
        (max(a, b), min(a, b))  # ç¢ºä¿ a >= bï¼Œä½¿æ¸›æ³•çµæœç‚ºæ­£
        for a, b in combinations(range(1, self.max_value + 1), 2)
        if not self._is_perfect_square(a * b)  # éæ¿¾å®Œå…¨å¹³æ–¹æ•¸
    ]

def generate_question(self):
    # å¾é ç¯©é¸åˆ—è¡¨ç›´æ¥é¸æ“‡ï¼Œä¿è­‰æœ‰æ•ˆ
    a, b = random.choice(self.valid_pairs)
    is_addition = random.choice([True, False])  # éš¨æ©ŸåŠ æ¸›æ³•

    # ä½¿ç”¨ç­”æ¡ˆé€†æ¨ï¼š(âˆša Â± âˆšb)Â² = a+b Â± 2âˆš(aÃ—b)
    return self._generate_with_params(a, b, is_addition)
```
**å„ªé»**: ç­”æ¡ˆä¸€å®šå¥½çœ‹ï¼Œå­¸ç”Ÿæœ‰æˆå°±æ„Ÿï¼Œè§£é¡Œæ­¥é©Ÿæ¸…æ™°

### ç­–ç•¥2: é å»ºæ¸…å–®æ³•ï¼ˆæ¨è–¦ç”¨æ–¼æ¦‚å¿µç†è§£é¡Œï¼‰
**ä»£è¡¨ç¯„ä¾‹**: `InverseTrigonometricFunctionGenerator`
**æ ¸å¿ƒæ€æƒ³**: é å»ºç‰¹æ®Šå€¼æ¸…å–®ï¼Œç¢ºä¿ç­”æ¡ˆåœ¨å­¸ç”ŸæŒæ¡ç¯„åœå…§

```python
# å¯¦éš›ä»£ç¢¼ç‰‡æ®µï¼šåä¸‰è§’å‡½æ•¸ç”Ÿæˆå™¨
def __init__(self, options=None):
    # é å»ºç‰¹æ®Šè§’åº¦æ¸…å–®ï¼Œç‚ºå­¸ç”Ÿå¥½è¨˜æ†¶
    self.special_angles = [
        -90, -60, -45, -30, 0, 30, 45, 60, 90,
        120, 135, 150, 180, 210, 225, 240, 270
    ]

def generate_question(self):
    # å¾é å»ºæ¸…å–®é¸å–ï¼Œä¿è­‰å­¸ç”Ÿèƒ½ç®—å‡º
    angle = random.choice(self.special_angles)

    if func_name == "tan" and angle in [90, 270]:
        continue  # é¿å…æœªå®šç¾©å€¼ï¼Œé™¤éæ˜¯é€²éšæ¨¡å¼

    # æ‰€æœ‰ç­”æ¡ˆéƒ½æ˜¯å­¸ç”Ÿç†Ÿæ‚‰çš„æ¨™æº–å€¼
    value = self._calculate_standard_value(func_name, angle)
```
**å„ªé»**: ç­”æ¡ˆæ¨™æº–åŒ–ï¼Œç¬¦åˆæ•™å­¸é€²åº¦ï¼Œå­¸ç”Ÿå®¹æ˜“é©—è­‰

### ç­–ç•¥3: é™åˆ¶éš¨æ©Ÿæ³•ï¼ˆé©ç”¨æ–¼åŸºç¤ç·´ç¿’é¡Œï¼‰
**æ ¸å¿ƒæ€æƒ³**: åœ¨æ•™å­¸é©å®œçš„ç¯„åœå…§éš¨æ©Ÿï¼Œé¿å…è¶…å‡ºå­¸ç”Ÿèƒ½åŠ›

```python
def generate_question(self):
    # ä¸æ˜¯å®Œå…¨éš¨æ©Ÿï¼Œè€Œæ˜¯æ•™å­¸å°å‘çš„é™åˆ¶éš¨æ©Ÿ

    # âœ… æ­£ç¢ºåšæ³•ï¼šé™åˆ¶åœ¨åˆç†ç¯„åœ
    numerator = random.randint(1, 12)    # é¿å…å¤ªå¤§çš„æ•¸å­—
    denominator = random.randint(2, 8)   # é¿å…å¤ªè¤‡é›œçš„åˆ†æ¯

    # ç¢ºä¿çµæœæ˜¯å­¸ç”Ÿèƒ½è™•ç†çš„
    if numerator % denominator == 0:
        continue  # é¿å…æ•´æ•¸ç­”æ¡ˆï¼Œå¤±å»ç·´ç¿’æ„ç¾©

    # âŒ éŒ¯èª¤åšæ³•ï¼šæƒ³ç•¶ç„¶çš„éš¨æ©Ÿ
    # numerator = random.randint(1, 1000)  # å¤ªå¤§ï¼Œå­¸ç”Ÿç®—ä¸å‹•
    # denominator = random.randint(1, 100) # å¯èƒ½å‡ºç¾1ï¼Œæ²’æœ‰æ„ç¾©
```


### ğŸ¯ å–å€¼æ–¹æ¡ˆé¸æ“‡æŒ‡å—

**é¸æ“‡ç­”æ¡ˆé€†æ¨æ³•ï¼Œç•¶**ï¼š
- è¨ˆç®—éç¨‹è¤‡é›œï¼ˆå¦‚æ ¹å¼åŒ–ç°¡ã€å› å¼åˆ†è§£ï¼‰
- å¸Œæœ›ç­”æ¡ˆæ•´æ½”æ¼‚äº®
- éœ€è¦å¤šæ­¥é©Ÿè§£é¡Œ

**é¸æ“‡é å»ºæ¸…å–®æ³•ï¼Œç•¶**ï¼š
- ç­”æ¡ˆæœ‰å›ºå®šæ¨™æº–ï¼ˆå¦‚ç‰¹æ®Šè§’ã€å¸¸ç”¨å…¬å¼ï¼‰
- é‡é»æ˜¯æ¦‚å¿µç†è§£è€Œéè¨ˆç®—
- éœ€è¦èˆ‡æ•™å­¸é€²åº¦åŒæ­¥

**é¸æ“‡é™åˆ¶éš¨æ©Ÿæ³•ï¼Œç•¶**ï¼š
- åŸºç¤ç·´ç¿’éœ€è¦å¤§é‡è®ŠåŒ–
- è¨ˆç®—ç›¸å°ç°¡å–®
- é‡é»æ˜¯ç†Ÿç·´åº¦è€ŒéæŠ€å·§

**é¿å…çš„é™·é˜±**ï¼š
- âŒ å®Œå…¨éš¨æ©Ÿå‡ºé¡Œï¼Œä¸è€ƒæ…®å­¸ç”Ÿèƒ½åŠ›
- âŒ ç­”æ¡ˆéæ–¼è¤‡é›œï¼Œæ‰“æ“Šå­¸ç¿’ä¿¡å¿ƒ
- âŒ æ²’æœ‰æ•™å­¸é‚è¼¯ï¼Œç´”ç²¹ç‚ºäº†è®ŠåŒ–è€Œè®ŠåŒ–

## 4. æŠ½è±¡æ–¹æ³•å¯¦ä½œ

### å¿…é ˆå¯¦ä½œçš„æ–¹æ³•

#### `get_question_size()`: é¡Œç›®é¡¯ç¤ºå¤§å°
å›å‚³ `QuestionSize` æšèˆ‰å€¼ï¼Œå¯ç”¨é¸é …ï¼š
- `QuestionSize.SMALL` (1) - 1x1ï¼Œé©åˆç°¡å–®è¨ˆç®—é¡Œ
- `QuestionSize.WIDE` (2) - 2x1ï¼Œé©åˆè¼ƒé•·é¡Œç›®
- `QuestionSize.SQUARE` (3) - 1x2ï¼Œé©åˆæœ‰åœ–å½¢çš„é¡Œç›®
- `QuestionSize.MEDIUM` (4) - 2x2ï¼Œé©åˆä¸­ç­‰è¤‡é›œåº¦
- `QuestionSize.LARGE` (5) - 3x2ï¼Œé©åˆè¤‡é›œé¡Œç›®
- `QuestionSize.EXTRA` (6) - 4x2ï¼Œé©åˆæœ€è¤‡é›œçš„é¡Œç›®

#### `get_category()`: é¡Œç›®ä¸»é¡åˆ¥
ç‚ºä¿æŒUIé¡¯ç¤ºçš„ä¸€è‡´æ€§ï¼Œå»ºè­°å¾ä»¥ä¸‹æ¨™æº–åˆ†é¡ä¸­é¸æ“‡ï¼š

**é«˜ä¸€ä¸Š**:
- "æ•¸èˆ‡å¼" - æ•¸èˆ‡ä»£æ•¸é‹ç®—
- "æŒ‡æ•¸èˆ‡å°æ•¸" - æŒ‡æ•¸èˆ‡å°æ•¸å‡½æ•¸
- "å¤šé …å¼å‡½æ•¸" - å¤šé …å¼ç›¸é—œé¡Œå‹
- "ç›´ç·šèˆ‡åœ“" - è§£æå¹¾ä½•

**é«˜ä¸€ä¸‹**:
- "æ•¸åˆ—èˆ‡ç´šæ•¸" - æ•¸åˆ—ç´šæ•¸è¨ˆç®—
- "æ•¸æ“šåˆ†æ" - çµ±è¨ˆèˆ‡æ•¸æ“šè™•ç†
- "æ’åˆ—çµ„åˆ" - æ’åˆ—çµ„åˆè¨ˆç®—
- "æ©Ÿç‡" - æ©Ÿç‡è¨ˆç®—

**é«˜äºŒä¸Š**:
- "ä¸‰è§’å‡½æ•¸" - ä¸‰è§’å‡½æ•¸åœ–å½¢èˆ‡æ€§è³ª
- "å¹³é¢å‘é‡" - äºŒç¶­å‘é‡é‹ç®—

**é«˜äºŒä¸‹**:
- "ç©ºé–“å‘é‡" - ä¸‰ç¶­å‘é‡é‹ç®—
- "ç©ºé–“ä¸­çš„å¹³é¢èˆ‡ç›´ç·š" - ç«‹é«”å¹¾ä½•
- "çŸ©é™£" - çŸ©é™£é‹ç®—

**é«˜ä¸‰ä¸Š**:
- "æ¥µé™" - æ¥µé™æ¦‚å¿µ
- "å¾®åˆ†" - å¾®åˆ†è¨ˆç®—
- "ç©åˆ†" - ç©åˆ†è¨ˆç®—

**é«˜ä¸‰ä¸‹**:
- "äºŒæ¬¡æ›²ç·š" - åœ“éŒæ›²ç·š
- "è¤‡æ•¸" - è¤‡æ•¸é‹ç®—
- "çµ±è¨ˆæ©Ÿç‡" - é€²éšçµ±è¨ˆ

#### `get_subcategory()`: é¡Œç›®å­é¡åˆ¥
å…·é«”çš„é¡Œå‹åˆ†é¡ï¼Œå¦‚ï¼š"ä¸‰è§’å‡½æ•¸å€¼è¨ˆç®—"ã€"é›™é‡æ ¹å¼åŒ–ç°¡"

#### `get_grade()`: å¹´ç´šæ ¼å¼
æ ¼å¼ï¼š`Gå¹´ç´šSå­¸æœŸ`ï¼Œå¦‚ "G10S1"ï¼ˆé«˜ä¸€ä¸Šï¼‰ã€"G11S2"ï¼ˆé«˜äºŒä¸‹ï¼‰
æ ¹æ“šåˆ†é¡çµ¦å‡ºå¹´ç´šå»ºè­°ï¼Œä½†ä¾å¯¦éš›æƒ…æ³æ±ºå®š

### å¯é¸é‡å¯«çš„æ–¹æ³•
- `get_subject()`: å›å‚³ç§‘ç›®åç¨±ï¼Œé è¨­"æ•¸å­¸"
- `get_difficulty()`: å›å‚³é›£åº¦ç­‰ç´šï¼Œé è¨­"MEDIUM"
- `get_figure_position()`: å›å‚³é¡Œç›®åœ–å½¢ä½ç½®ï¼Œé è¨­ `"right"`
  - æœ‰æ•ˆå€¼: `"right"` (é è¨­), `"left"`, `"bottom"`, `"none"`
  - æ³¨æ„: è‹¥ `get_figure_data_question()` è¿”å› `None`ï¼Œç³»çµ±è‡ªå‹•å¿½ç•¥æ­¤è¨­å®š
- `get_explanation_figure_position()`: å›å‚³è§£é‡‹åœ–å½¢ä½ç½®ï¼Œé è¨­ `"right"`
  - æœ‰æ•ˆå€¼: `"right"` (é è¨­), `"bottom"`, `"none"`
  - âš ï¸ ä¸æ”¯æ´ `"left"` é¸é …ï¼ˆèˆ‡é¡Œç›®åœ–å½¢ä¸åŒï¼‰
  - æ³¨æ„: è‹¥ `get_figure_data_explanation()` è¿”å› `None`ï¼Œç³»çµ±è‡ªå‹•å¿½ç•¥æ­¤è¨­å®š

### å·²å¯¦ç¾çš„å¯¦ç”¨æ–¹æ³•
- `generate_batch(count)`: æ‰¹é‡ç”ŸæˆæŒ‡å®šæ•¸é‡çš„é¡Œç›®
- `set_options(options)`: å‹•æ…‹è¨­ç½®ç”Ÿæˆå™¨é¸é …
- `has_config()`: è‡ªå‹•æª¢æŸ¥ç”Ÿæˆå™¨æ˜¯å¦éœ€è¦é…ç½®ï¼ˆæ ¹æ“š get_config_schema()ï¼‰

### æ¨™æº–å…ƒæ•¸æ“šä½¿ç”¨
ä½¿ç”¨ `self._get_standard_metadata()` è‡ªå‹•ç”¢ç”Ÿå®Œæ•´å…ƒæ•¸æ“š

## 5. é…ç½®ç³»çµ±æ•´åˆ

### æ”¯æ´çš„æ§ä»¶é¡å‹

ç³»çµ±ç›®å‰æ”¯æ´ 4 ç¨®é…ç½®æ§ä»¶é¡å‹ï¼ˆåŸºæ–¼ ConfigFactory å¯¦éš›å¯¦ç¾ï¼‰ï¼š

#### **1. select - ä¸‹æ‹‰é¸æ“‡æ¡†**
```python
"function_scope": {
    "type": "select",
    "label": "å‡½æ•¸ç¯„åœ",
    "default": "basic",
    "options": ["basic", "extended"]
}
```

#### **2. checkbox - å‹¾é¸æ¡†**
```python
"allow_negative": {
    "type": "checkbox",
    "label": "å…è¨±è² æ•¸",
    "default": False
}
```

#### **3. number_input - æ•¸å­—è¼¸å…¥æ¡†**
```python
"max_value": {
    "type": "number_input",
    "label": "æ•¸å€¼ä¸Šé™",
    "default": 25,
    "min": 5,
    "max": 100
}
```

#### **4. percentage_group - ç™¾åˆ†æ¯”åˆ†é…**
```python
"mode_weights": {
    "type": "percentage_group",
    "label": "é¡Œå‹æ¯”ä¾‹åˆ†é…",
    "items": {
        "original": {"label": "0~90Â°è½‰æ›", "default": 70},
        "formula": {"label": "å…¬å¼å•ç­”", "default": 10},
        "narrow_angle": {"label": "éŠ³è§’è¨ˆç®—", "default": 20}
    }
}
```

### å¯¦éš›ç”Ÿæˆå™¨é…ç½®ç¯„ä¾‹

#### **ç°¡å–®é…ç½®ï¼šé›™é‡æ ¹è™Ÿç”Ÿæˆå™¨**
```python
@classmethod
def get_config_schema(cls) -> Dict[str, Dict[str, Any]]:
    return {
        "max_value": {
            "type": "number_input",
            "label": "æ•¸å€¼ä¸Šé™",
            "default": 25,
            "min": 5,
            "max": 100,
            "description": "æ§åˆ¶ç”Ÿæˆç­”æ¡ˆæ•¸å­—çš„æœ€å¤§å€¼"
        }
    }

def __init__(self, options: Dict[str, Any] = None):
    super().__init__(options)
    options = options or {}

    # ç°¡æ½”çš„é…ç½®è™•ç†
    self.max_value = options.get('max_value', 25)

    # å»ºç«‹é ç¯©é¸çµ„åˆï¼Œé¿å…ç”Ÿæˆæ™‚é‡è¤‡è¨ˆç®—
    self._build_valid_combinations()
```

#### **è¤‡é›œé…ç½®ï¼šä¸‰è§’å‡½æ•¸ç”Ÿæˆå™¨**
```python
@classmethod
def get_config_schema(cls) -> Dict[str, Dict[str, Any]]:
    return {
        "function_scope": {
            "type": "select",
            "label": "å‡½æ•¸ç¯„åœ",
            "default": "basic",
            "options": ["basic", "extended"]
        },
        "angle_mode": {
            "type": "select",
            "label": "è§’åº¦æ¨¡å¼",
            "default": "degree",
            "options": ["degree", "radian", "mixed"]
        }
    }

def __init__(self, options: Dict[str, Any] = None):
    super().__init__(options)
    config = options or {}

    # åŸºæœ¬é…ç½®è®€å–
    function_scope = config.get("function_scope", "basic")
    if function_scope == "extended":
        self.functions = ["sin", "cos", "tan", "csc", "sec", "cot"]
    else:
        self.functions = ["sin", "cos", "tan"]

    self.angle_mode = config.get("angle_mode", "degree")
```

#### **ç™¾åˆ†æ¯”é…ç½®ï¼šè§’åº¦è½‰æ›ç”Ÿæˆå™¨**
```python
@classmethod
def get_config_schema(cls):
    return {
        "mode_weights": {
            "type": "percentage_group",
            "label": "é¡Œå‹æ¯”ä¾‹åˆ†é…",
            "description": "èª¿æ•´ä¸‰ç¨®é¡Œå‹çš„å‡ºç¾é »ç‡ï¼Œç¸½å’Œè‡ªå‹•ä¿æŒç‚º100%",
            "items": {
                "original": {"label": "0~90Â°è½‰æ›", "default": 70},
                "formula": {"label": "å…¬å¼å•ç­”", "default": 10},
                "narrow_angle": {"label": "éŠ³è§’è¨ˆç®—", "default": 20}
            }
        }
    }

def __init__(self, options: Dict[str, Any] = None):
    super().__init__(options)
    options = options or {}

    # percentage_group åœ¨ ConfigFactory.create_percentage_group() å·²å¼·åˆ¶é©—è­‰ç¸½å’Œ=100%
    # ç”Ÿæˆå™¨å±¤é¢ç„¡éœ€é‡è¤‡é©—è­‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼ˆéµå¾ªå–®ä¸€è·è²¬åŸå‰‡ï¼‰
    mode_config = options.get("mode_weights", {})
    if mode_config:
        self.mode_weights = [
            mode_config.get("original", 70),
            mode_config.get("formula", 10),
            mode_config.get("narrow_angle", 20)
        ]
    else:
        self.mode_weights = [70, 10, 20]  # é è¨­å€¼
```

#### **ç‚ºä»€éº¼ç”Ÿæˆå™¨ä¸é©—è­‰ percentage_groupï¼Ÿ**
- **å–®ä¸€è·è²¬åŸå‰‡**: UIå±¤ï¼ˆConfigFactoryï¼‰è² è²¬æ‰€æœ‰è¼¸å…¥é©—è­‰
- **ä¿¡ä»»é‚Šç•Œ**: ç”Ÿæˆå™¨ä¿¡ä»»å¾UIå‚³å…¥çš„é…ç½®å·²ç¶“é©—è­‰å®Œæˆ
- **é¿å…é‡è¤‡é©—è­‰**: æ¸›å°‘ä»£ç¢¼å†—é¤˜ï¼Œæå‡ç¶­è­·æ€§
- **æ¶æ§‹åˆ†å±¤**: UIå±¤=è¼¸å…¥é©—è­‰ï¼Œç”Ÿæˆå™¨å±¤=æ¥­å‹™é‚è¼¯

### é…ç½®æœ€ä½³å¯¦è¸

#### **ç°¡æ½”çš„é…ç½®è™•ç†**

**è¨­è¨ˆåŸå‰‡**: ä¿¡ä»» UI å±¤é©—è­‰ï¼Œç”Ÿæˆå™¨å°ˆæ³¨æ¥­å‹™é‚è¼¯

**æ¨è–¦åšæ³•**:
```python
def __init__(self, options: Dict[str, Any] = None):
    super().__init__(options)
    options = options or {}

    # âœ… ç°¡æ½”ç›´æ¥ï¼šå¾ options è®€å–ä¸¦è¨­å®šé è¨­å€¼
    self.max_value = options.get('max_value', 25)
    self.difficulty = options.get('difficulty', 'MEDIUM')
```

**é¿å…éåº¦å·¥ç¨‹åŒ–**:
```python
# âŒ ä¸æ¨è–¦ï¼šç”Ÿæˆå™¨å…§é‡è¤‡é©—è­‰
if not isinstance(options.get('max_value'), int):
    raise ValueError("max_value å¿…é ˆæ˜¯æ•´æ•¸")

# âŒ ä¸æ¨è–¦ï¼šè¤‡é›œçš„ Pydantic æ¨¡å‹ï¼ˆé©åˆè¤‡é›œç³»çµ±ï¼Œä½†ç”Ÿæˆå™¨ä¸éœ€è¦ï¼‰
class GeneratorConfig(BaseModel):
    max_value: int = Field(ge=1, le=100)
    difficulty: str = Field(regex="^(EASY|MEDIUM|HARD)$")
```

**ç‚ºä»€éº¼ç°¡æ½”å°±å¥½ï¼Ÿ**
1. **UI å±¤å·²é©—è­‰**: ConfigFactory ç¢ºä¿æ‰€æœ‰è¼¸å…¥åˆæ³•ï¼ˆé¡å‹ã€ç¯„åœã€ç¸½å’Œï¼‰
2. **é¿å…é‡è¤‡**: å…©å±¤é©—è­‰é€ æˆç¶­è­·è² æ“”å’Œé‚è¼¯è¡çª
3. **æ•™å¸«å‹å–„**: ä»£ç¢¼ç°¡å–®æ˜“è®€ï¼Œé™ä½ç¶­è­·é–€æª»
4. **éµå¾ª CLAUDE.md åŸå‰‡**: è©²ç”¨åŸºç¤æ‹›å¼å°±ç”¨åŸºç¤æ‹›å¼ï¼Œä¸éåº¦è¨­è¨ˆ

**ä¾‹å¤–æƒ…æ³**:
å¦‚æœç”Ÿæˆå™¨æœ‰è¤‡é›œçš„å…§éƒ¨ç‹€æ…‹ä¾è³´æˆ–éœ€è¦è½‰æ›é…ç½®æ ¼å¼ï¼Œå¯ä»¥é©åº¦å¢åŠ é‚è¼¯ï¼š
```python
# é…ç½®è½‰æ›ç¯„ä¾‹ï¼ˆåˆç†çš„è¤‡é›œåº¦ï¼‰
function_scope = options.get("function_scope", "basic")
if function_scope == "extended":
    self.functions = ["sin", "cos", "tan", "csc", "sec", "cot"]
else:
    self.functions = ["sin", "cos", "tan"]
```

#### **åˆç†çš„é è¨­å€¼**
- æ‰€æœ‰é…ç½®é …éƒ½è¦æœ‰åˆç†çš„é è¨­å€¼
- é è¨­å€¼è¦è®“ç”Ÿæˆå™¨åœ¨ç„¡é…ç½®æ™‚ä¹Ÿèƒ½æ­£å¸¸é‹ä½œ
- percentage_group çš„é è¨­å€¼ç¸½å’Œå¿…é ˆç­‰æ–¼ 100

è©³ç´°é…ç½®é¸é …è«‹åƒé–±ï¼š[é…ç½®æ§ä»¶æ“´å±•æŒ‡å—.md](é…ç½®æ§ä»¶æ“´å±•æŒ‡å—.md)

**å¦‚æœéœ€è¦è‡ªè¡Œé–‹ç™¼æ–°çš„é…ç½®æ§ä»¶é¡å‹**ï¼Œè«‹åƒé–±è©²æŒ‡å—é€²è¡Œæ“´å±•ã€‚æœ‰äº†æ–°çš„é…ç½®é¸é …ï¼Œä¹Ÿå¿…é ˆå›ä¾†æ›´æ–°æœ¬é–‹ç™¼æŒ‡å—ã€‚

## 6. åœ–å½¢æ•¸æ“šæ•´åˆ

### å¯ç”¨çš„åœ–å½¢é¡å‹
ç³»çµ±æä¾›äº†ä»¥ä¸‹åŸºç¤åœ–å½¢é¡å‹ï¼š
1. **`unit_circle`** - å–®ä½åœ“ï¼ŒåŒ…å«è§’åº¦ã€é»ç­‰
2. **`circle`** - ä¸€èˆ¬åœ“å½¢
3. **`coordinate_system`** - åæ¨™ç³»
4. **`point`** - é»
5. **`line`** - ç·šæ®µ
6. **`angle`** - è§’åº¦
7. **`label`** - æ–‡å­—æ¨™ç±¤

é å®šç¾©è¤‡åˆåœ–å½¢é¡å‹ï¼š
1. **`standard_unit_circle`** - æ¨™æº–å–®ä½åœ“ï¼ŒåŒ…å«åæ¨™è»¸ã€åœ“ã€é»ã€è§’åº¦ç­‰

### åœ–å½¢æ•´åˆæ–¹æ³•
**å¦‚æœç”Ÿæˆå™¨éœ€è¦é™„åœ–ï¼Œå¿…é ˆå¯¦ä½œ**:
- `get_figure_data_question()`: å›å‚³é¡Œç›®åœ–å½¢é…ç½®æˆ– None
- `get_figure_data_explanation()`: å›å‚³è§£é‡‹åœ–å½¢é…ç½®æˆ– None

### åœ–å½¢æ–¹æ³•å¯¦ä½œç¯„ä¾‹
```python
def get_figure_data_question(self):
    """å›å‚³é¡Œç›®åœ–å½¢é…ç½®"""
    return {
        'type': 'standard_unit_circle',
        'params': {
            'angle': 30,  # å¯¦éš›åƒæ•¸
            'show_coordinates': True,
            'show_angle': True,
            'highlight_function': 'sin'
        },
        'options': {'scale': 1.0}
    }

def get_figure_data_explanation(self):
    """å›å‚³è§£é‡‹åœ–å½¢é…ç½®"""
    # é€šå¸¸æ¯”é¡Œç›®åœ–å½¢åŒ…å«æ›´å¤šè³‡è¨Š
    return {
        'type': 'standard_unit_circle',
        'params': {
            'variant': 'explanation',  # è§£é‡‹æ¨¡å¼
            'angle': 30,
            'show_coordinates': True,
            'show_angle': True,
            'show_point': True,
            'show_radius': True,
            'highlight_function': 'sin'
        },
        'options': {'scale': 1.2}  # è§£é‡‹åœ–ç¨å¤§
    }
```

### åœ–å½¢ä½ç½®é…ç½®

#### é¡Œç›®åœ–å½¢ä½ç½® (`figure_position`)
- **`"right"`** (é è¨­): åœ–åœ¨å³å´ (40% å¯¬åº¦)ï¼Œæ–‡å­—åœ¨å·¦å´ (60% å¯¬åº¦)
- **`"left"`**: åœ–åœ¨å·¦å´ï¼Œæ–‡å­—åœ¨å³å´
- **`"bottom"`**: åœ–åœ¨æ–‡å­—ä¸‹æ–¹ï¼Œä½¿ç”¨å…¨å¯¬
- **`"none"`**: ç„¡åœ–å½¢ï¼Œæ–‡å­—ä½¿ç”¨å…¨å¯¬

#### è§£é‡‹åœ–å½¢ä½ç½® (`explanation_figure_position`)
- **`"right"`** (é è¨­): åœ–åœ¨å³å´ minipage (38% å¯¬åº¦)ï¼Œæ–‡å­—åœ¨å·¦å´ (58% å¯¬åº¦)
- **`"bottom"`**: åœ–åœ¨æ–‡å­—ä¸‹æ–¹ï¼Œä½¿ç”¨å…¨å¯¬
- **`"none"`**: ç„¡åœ–å½¢ï¼Œæ–‡å­—ä½¿ç”¨å…¨å¯¬
- âš ï¸ **ä¸æ”¯æ´ `"left"` é¸é …**ï¼ˆèˆ‡é¡Œç›®åœ–å½¢ä¸åŒï¼‰

#### åœ–å½¢ä½ç½®èˆ‡é¡¯ç¤ºé‚è¼¯

**é‡è¦**: åœ–å½¢ä½ç½®åƒæ•¸åƒ…åœ¨å°æ‡‰çš„ `get_figure_data_*()` æ–¹æ³•è¿”å›æœ‰æ•ˆåœ–å½¢æ•¸æ“šæ™‚ç”Ÿæ•ˆã€‚

**å…¸å‹ä½¿ç”¨æƒ…å¢ƒ**ï¼š
```python
# æƒ…å¢ƒ1: æœ‰åœ–çš„ç”Ÿæˆå™¨ï¼ˆä½¿ç”¨é è¨­ "right"ï¼‰
def get_figure_data_question(self):
    return {'type': 'unit_circle', 'params': {'angle': 30}}
# â†’ åœ–å½¢é¡¯ç¤ºåœ¨å³å´ (40% å¯¬)ï¼Œæ–‡å­—åœ¨å·¦å´ (60% å¯¬)

# æƒ…å¢ƒ2: ç„¡åœ–çš„ç”Ÿæˆå™¨ï¼ˆç„¡éœ€é‡å¯« get_figure_positionï¼‰
# get_figure_data_question() ç¹¼æ‰¿åŸºé¡è¿”å› None
# â†’ ç³»çµ±è‡ªå‹•å…¨å¯¬é¡¯ç¤ºæ–‡å­—ï¼Œå¿½ç•¥ figure_position è¨­å®š

# æƒ…å¢ƒ3: ç‰¹æ®Šæ’ç‰ˆéœ€æ±‚ï¼ˆéœ€è¦å¤§åœ–æ™‚ï¼‰
def get_figure_position(self):
    return "bottom"  # åœ–å½¢ä½¿ç”¨å…¨å¯¬é¡¯ç¤º
```

è©³ç´°åœ–å½¢é–‹ç™¼è«‹åƒé–±ï¼š[åœ–å½¢ç”Ÿæˆå™¨é–‹ç™¼æŒ‡å—.md](åœ–å½¢ç”Ÿæˆå™¨é–‹ç™¼æŒ‡å—.md)
å¯ç”¨åœ–å½¢åˆ—è¡¨åœ¨ï¼š [available_figures.md](available_figures.md)

**å¦‚æœéœ€è¦é–‹ç™¼æ–°çš„åœ–å½¢é¡å‹**ï¼Œè«‹åƒé–±åœ–å½¢é–‹ç™¼æŒ‡å—é€²è¡Œæ“´å±•ã€‚æœ‰äº†æ–°çš„åœ–å½¢é¡å‹ï¼Œä¹Ÿå¿…é ˆå›ä¾†æ›´æ–°æœ¬é–‹ç™¼æŒ‡å—çš„å¯ç”¨åœ–å½¢é¡å‹åˆ—è¡¨ã€‚

## 7. ç¢ºå®šæ€§ç”Ÿæˆè¨­è¨ˆèˆ‡ç©©å®šæ€§ä¿è­‰

### ç¾ä»£ç”Ÿæˆå™¨è¨­è¨ˆç†å¿µ

**æ ¸å¿ƒåŸå‰‡**: é€šéé ç¯©é¸å’Œç¢ºå®šæ€§è¨­è¨ˆï¼Œå¾æºé ­é¿å…éŒ¯èª¤ï¼Œè€Œéä¾è³´é‡è©¦æ©Ÿåˆ¶ã€‚

**è¨­è¨ˆå“²å­¸**:
- âŒ **å‚³çµ±åšæ³•**: éš¨æ©Ÿç”Ÿæˆ â†’ æª¢æŸ¥æœ‰æ•ˆæ€§ â†’ å¤±æ•—é‡è©¦ â†’ é”åˆ°ä¸Šé™è¿”å›éŒ¯èª¤
- âœ… **ç¾ä»£åšæ³•**: é å…ˆç¯©é¸æœ‰æ•ˆçµ„åˆ â†’ ç¢ºå®šæ€§é¸æ“‡ â†’ ä¿è­‰æ¯æ¬¡æˆåŠŸ

**å„ªå‹¢**:
1. **æ€§èƒ½**: æ¶ˆé™¤é‡è©¦å¾ªç’°ï¼Œç”Ÿæˆé€Ÿåº¦ç©©å®š
2. **å¯é æ¸¬æ€§**: ä¸æœƒå› ç‚ºé‹æ°£ä¸å¥½è€Œå¤±æ•—
3. **æ•™å­¸å‹å–„**: ä¿è­‰é¡Œç›®å“è³ªä¸€è‡´
4. **ä»£ç¢¼ç°¡æ½”**: æ¸›å°‘è¤‡é›œçš„éŒ¯èª¤è™•ç†é‚è¼¯

### ç¢ºå®šæ€§ç”Ÿæˆæ¨¡å¼
**ç¾ä»£ç”Ÿæˆå™¨æ¡ç”¨ç¢ºå®šæ€§è¨­è¨ˆï¼Œæœçµ•é‡è©¦æ©Ÿåˆ¶**:
```python
def _generate_core_question(self) -> Dict[str, Any]:
    """æ ¸å¿ƒç”Ÿæˆé‚è¼¯ - ç¢ºå®šæ€§è¨­è¨ˆé¿å…å¤±æ•—"""
    # 1. å¾é ç¯©é¸æœ‰æ•ˆçµ„åˆä¸­ç¢ºå®šæ€§é¸æ“‡
    combination = random.choice(self.valid_combinations)

    # 2. ä½¿ç”¨ç°¡å–®é‚è¼¯ç”Ÿæˆé¡Œç›®ï¼Œé¿å…è¤‡é›œåˆ¤æ–·
    question_latex = f"${self._format_expression(combination)}$"
    answer_latex = f"${self._calculate_answer(combination)}$"

    return {
        "question": question_latex,
        "answer": answer_latex,
        "explanation": self._generate_explanation(combination),
        **self._get_standard_metadata()
    }

def _get_fallback_question(self) -> Dict[str, Any]:
    """å¾Œå‚™é¡Œç›® - ç•¶æ ¸å¿ƒç”Ÿæˆå¤±æ•—æ™‚çš„å®‰å…¨æ©Ÿåˆ¶"""
    return {
        "question": "$\\sqrt{2} + \\sqrt{3} = $",  # å›ºå®šçš„å®‰å…¨é¡Œç›®
        "answer": "$\\sqrt{2} + \\sqrt{3}$",
        "explanation": "æ­¤ç‚ºæœ€ç°¡æ ¹å¼ï¼Œç„¡æ³•é€²ä¸€æ­¥åŒ–ç°¡",
        **self._get_standard_metadata()
    }
```

### é ç¯©é¸ç­–ç•¥å¯¦ç¾
**å»ºæ§‹æœ‰æ•ˆçµ„åˆåˆ—è¡¨é¿å…ç”Ÿæˆæ™‚å¤±æ•—**:
```python
def __init__(self, options: Dict[str, Any] = None):
    super().__init__(options)
    # åˆå§‹åŒ–æ™‚å»ºæ§‹æ‰€æœ‰æœ‰æ•ˆçµ„åˆ
    self._build_valid_combinations()

def _build_valid_combinations(self):
    """é ç¯©é¸æœ‰æ•ˆçš„åƒæ•¸çµ„åˆï¼Œç¢ºä¿æ¯æ¬¡ç”Ÿæˆéƒ½æˆåŠŸ"""
    from itertools import combinations  # å°å…¥çµ„åˆå·¥å…·

    self.valid_combinations = []

    # æ ¹æ“šæ•¸å­¸é‚è¼¯é ç¯©é¸æœ‰æ•ˆçµ„åˆ
    for a, b in combinations(range(1, self.max_value + 1), 2):
        if self._is_valid_combination(a, b):
            self.valid_combinations.append((max(a, b), min(a, b)))

    self.logger.info(f"é ç¯©é¸å®Œæˆï¼Œæœ‰æ•ˆçµ„åˆæ•¸é‡: {len(self.valid_combinations)}")

def _is_valid_combination(self, a: int, b: int) -> bool:
    """æ•¸å­¸é‚è¼¯é©—è­‰ï¼Œä¾‹å¦‚ç¢ºä¿ä¸æ˜¯å®Œå…¨å¹³æ–¹æ•¸"""
    return not self._is_perfect_square(a * b)
```

### æ¨¡æ¿ç³»çµ±çµ„ç¹”
**å¿…é ˆä½¿ç”¨é¡å…§å¸¸é‡çµ„ç¹”**:
```python
class YourGenerator(QuestionGenerator):
    # æ¨¡æ¿é›†ä¸­ç®¡ç†
    EXPLANATION_TEMPLATES = {
        "type_a": "æ¨¡æ¿å…§å®¹ {param1} å’Œ {param2}",
        "type_b": "å¦ä¸€ç¨®æ¨¡æ¿ {param1} çš„è™•ç†æ–¹å¼",
    }

    def _generate_explanation(self, question_type, param1, param2):
        # æ¨¡æ¿é¸æ“‡é‚è¼¯
        template = self.EXPLANATION_TEMPLATES[question_type]
        return template.format(param1=param1, param2=param2)
```

## 8. éœ€æ±‚å°å‘é¸æ“‡

æ ¹æ“šä½ çš„é–‹ç™¼éœ€æ±‚ï¼Œé¸æ“‡åˆé©çš„åƒè€ƒç¯„ä¾‹ï¼š

### æˆ‘è¦å›ºå®šæ¦‚å¿µè¨˜æ†¶é¡Œç›®
**åƒè€ƒ**: `InverseTrigonometricFunctionGenerator`
- é å»ºç‰¹æ®Šè§’åº¦æ¸…å–®ï¼Œæ•™å­¸é‡é»æ˜ç¢º
- ç°¡å–®çš„ `options.get()` åƒæ•¸è™•ç†
- ç„¡éœ€å‹•æ…‹é…ç½®UIï¼Œå°ˆæ³¨æ•™å­¸é‚è¼¯

**é©ç”¨å ´æ™¯**: ç‰¹æ®Šè§’åº¦ã€å…¬å¼è¨˜æ†¶ã€åŸºç¤æ¦‚å¿µç·´ç¿’

### æˆ‘è¦æ•¸å€¼è¨ˆç®—å¯èª¿é¡Œç›®
**åƒè€ƒ**: `DoubleRadicalSimplificationGenerator`
- å®Œæ•´LaTeXæ¨¡æ¿ç³»çµ±ï¼Œå°ˆæ¥­é¡¯ç¤º
- é ç¯©é¸284å€‹æœ‰æ•ˆçµ„åˆï¼Œç¢ºä¿æ•¸å­¸æœ‰æ•ˆæ€§
- number_inputé…ç½®æ§ä»¶ï¼Œæ•™å¸«å¯èª¿æ•´æ•¸å€¼ç¯„åœ

**é©ç”¨å ´æ™¯**: ä»£æ•¸è¨ˆç®—ã€å¯è®Šé›£åº¦ã€åƒæ•¸åŒ–æ•¸å­¸é¡Œ

### æˆ‘è¦å¤šé¡Œå‹æ¬Šé‡é…ç½®
**åƒè€ƒ**: `TrigAngleConversionGenerator`
- percentage_groupé…ç½®æ§ä»¶ï¼Œè¦–è¦ºåŒ–æ¯”ä¾‹èª¿æ•´
- ä¸‰ç¨®é¡Œå‹å‹•æ…‹æ¬Šé‡åˆ†é…ï¼ˆç¬¬ä¸€è±¡é™è½‰æ›ã€å…¬å¼å•ç­”ã€çª„è§’è½‰æ›ï¼‰
- ç¾ä»£åŒ–é…ç½®UIæ•´åˆ

**é©ç”¨å ´æ™¯**: ç¶œåˆç·´ç¿’ã€å¤šå…ƒé¡Œå‹æ··åˆã€æ¯”ä¾‹åŒ–æ•™å­¸

### æˆ‘è¦è¤‡é›œæ¨ç†æ­¥é©Ÿé¡Œç›®
**åƒè€ƒ**: `TrigonometricFunctionGenerator`
- å®Œæ•´EXPLANATION_TEMPLATESæ¨¡æ¿ç³»çµ±
- é ç¯©é¸49å€‹æœ‰æ•ˆè§’åº¦-å‡½æ•¸çµ„åˆ
- å¤šè±¡é™è§’åº¦è™•ç†èˆ‡è©³ç´°è§£ææ­¥é©Ÿ

**é©ç”¨å ´æ™¯**: æ¨ç†è¨“ç·´ã€è©³ç´°æ•™å­¸è§£æã€ä¸‰è§’å‡½æ•¸æ·±åº¦å­¸ç¿’

## 9. å•é¡Œæ’æŸ¥

### ç”Ÿæˆå™¨æ²’å‡ºç¾åœ¨UI
**æª¢æŸ¥æ¸…å–®**:
1. âœ… æ˜¯å¦æœ‰ `@register_generator` è£é£¾å™¨
2. âœ… æª”æ¡ˆæ˜¯å¦åœ¨æ­£ç¢ºçš„ `generators/category/` è·¯å¾‘
3. âœ… æ˜¯å¦æœ‰èªæ³•éŒ¯èª¤å°è‡´å°å…¥å¤±æ•—
4. âœ… `get_category()` å’Œ `get_subcategory()` å›å‚³å€¼æ˜¯å¦æ­£ç¢º

**åµéŒ¯æ–¹æ³•**:
```bash
# æª¢æŸ¥ç”Ÿæˆå™¨å°å…¥å’Œè¨»å†Šç‹€æ…‹
py -c "
from generators.your_category.your_generator import YourGenerator
from utils.core.registry import registry
print('âœ… å°å…¥æˆåŠŸ')
print('è¨»å†Šç”Ÿæˆå™¨åˆ—è¡¨:')
for (category, subcategory), generator_class in registry.get_all_generators().items():
    print(f'- {generator_class.__name__} [{category}/{subcategory}]')
"

# æª¢æŸ¥è‡ªå‹•è¨»å†Šç³»çµ±æ—¥èªŒ
py -c "
import logging
logging.basicConfig(level=logging.INFO)
from generators import *  # è§¸ç™¼è‡ªå‹•è¨»å†Š
"
```

### é…ç½®é¸é …ä¸ç”Ÿæ•ˆ
**å¸¸è¦‹åŸå› **:
- `get_config_schema()` æ ¼å¼éŒ¯èª¤
- åœ¨ `__init__()` ä¸­å¿˜è¨˜è®€å– `options` åƒæ•¸
- JSON Schema æ ¼å¼ä¸ç¬¦åˆè¦ç¯„

**é©—è­‰æ–¹æ³•**:
```python
# æª¢æŸ¥ schema æ ¼å¼
generator = YourGenerator()
print(generator.get_config_schema())

# æª¢æŸ¥é¸é …è®€å–
generator = YourGenerator({'your_option': 'test_value'})
print(generator.your_option)  # æ‡‰è©²å°å‡º 'test_value'
```

### LaTeX é¡¯ç¤ºéŒ¯èª¤
**å¸¸è¦‹å•é¡Œ**: ä½¿ç”¨Unicodeç¬¦è™Ÿå°è‡´PDFé¡¯ç¤ºç•°å¸¸

**æ­£ç¢ºåšæ³•**:
```python
# âœ… ä½¿ç”¨LaTeXå‘½ä»¤
degree = f"${angle}^\\circ$"        # åº¦æ•¸ç¬¦è™Ÿ
times = f"$a \\times b$"            # ä¹˜è™Ÿ
sin_func = f"$\\sin({angle})$"      # ä¸‰è§’å‡½æ•¸

# âŒ é¿å…Unicode
degree = f"${angle}Â°$"              # æœƒåœ¨PDFä¸­é¡¯ç¤ºéŒ¯èª¤
times = f"$a Ã— b$"                  # æœƒåœ¨PDFä¸­é¡¯ç¤ºéŒ¯èª¤
```

### é¡Œç›®é‚è¼¯éŒ¯èª¤
**æ•¸å­¸é©—è­‰æ–¹æ³•**:
1. æ‰‹å‹•è¨ˆç®—å¹¾å€‹ç¯„ä¾‹ç¢ºèªç­”æ¡ˆæ­£ç¢º
2. æª¢æŸ¥å®šç¾©åŸŸ/å€¼åŸŸé™åˆ¶
3. é©—è­‰ç‰¹æ®Šå€¼çš„è™•ç†
4. ç¢ºèªé‚Šç•Œæ¢ä»¶

**æ–°æ¶æ§‹éŒ¯èª¤è™•ç†é©—è­‰**:
```python
def test_generator_new_architecture():
    generator = YourGenerator()

    # æ¸¬è©¦æ–°æ¶æ§‹æ–¹æ³•å­˜åœ¨
    assert hasattr(generator, '_generate_core_question')
    assert hasattr(generator, '_get_fallback_question')

    # æ¸¬è©¦æ¨™æº–ç”Ÿæˆæ–¹æ³•
    for _ in range(10):
        question = generator.generate_question()  # ä½¿ç”¨åŸºé¡çš„çµ±ä¸€éŒ¯èª¤è™•ç†
        assert 'question' in question
        assert 'answer' in question
        assert 'explanation' in question

    # æ¸¬è©¦å¾Œå‚™æ©Ÿåˆ¶
    fallback = generator._get_fallback_question()
    assert fallback['question'] is not None
    assert fallback['answer'] is not None

    # æ¸¬è©¦é ç¯©é¸æ©Ÿåˆ¶ï¼ˆå¦‚é©ç”¨ï¼‰
    if hasattr(generator, 'valid_combinations'):
        assert len(generator.valid_combinations) > 0
        print(f"âœ… é ç¯©é¸çµ„åˆæ•¸é‡: {len(generator.valid_combinations)}")
```

---

## åƒè€ƒè³‡æº

**è©³ç´°å¯¦æ–½æŒ‡å—**:
- [é…ç½®æ§ä»¶æ“´å±•æŒ‡å—.md](é…ç½®æ§ä»¶æ“´å±•æŒ‡å—.md) - é…ç½®UIå¯¦ç¾
- [åœ–å½¢ç”Ÿæˆå™¨é–‹ç™¼æŒ‡å—.md](åœ–å½¢ç”Ÿæˆå™¨é–‹ç™¼æŒ‡å—.md) - åœ–å½¢æ•´åˆå°ˆé–€æŒ‡å—
- [available_figures.md](available_figures.md) - å¯ç”¨åœ–å½¢æ¸…å–®
- [ä»£ç¢¼è¨»è§£è¦ç¯„.md](ä»£ç¢¼è¨»è§£è¦ç¯„.md) - è¨»è§£æ’°å¯«æ¨™æº–
- [ç”Ÿæˆå™¨æª”æ¡ˆçµæ§‹è¦ç¯„.md](ç”Ÿæˆå™¨æª”æ¡ˆçµæ§‹è¦ç¯„.md) - ä»£ç¢¼çµæ§‹æ¨™æº–

**å…¸ç¯„ç”Ÿæˆå™¨ç¯„ä¾‹**:
- `generators/trigonometry/InverseTrigonometricFunctionGenerator.py`
- `generators/algebra/double_radical_simplification.py`
- `generators/trigonometry/TrigAngleConversionGenerator.py`
- `generators/trigonometry/TrigonometricFunctionGenerator.py`

---

**æ’°å¯«æ—¥æœŸ**: 2025-09-29
**ç‰ˆæœ¬**: 2.0
**ç‹€æ…‹**: çµæ§‹å„ªåŒ–å®Œæˆ