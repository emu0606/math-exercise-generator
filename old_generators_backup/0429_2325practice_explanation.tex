\documentclass[a4paper,11pt]{article}
\usepackage{xeCJK}
\usepackage[margin=1.8cm]{geometry}
\usepackage{tikz}
\usetikzlibrary{positioning, shadows, calc} % Added shadows and calc
\usepackage{amsmath,amssymb}
\usepackage{multicol}
\usepackage{enumitem}
\usepackage{fancyhdr}
\usepackage{xcolor}
\usepackage{mdframed}
\usepackage[most]{tcolorbox}
\usepackage{fontspec}
\usepackage{wrapfig} % Added for text wrapping around figures

% 設定字體
\setCJKmainfont{Noto Sans TC}
\setmainfont{Noto Sans TC}
\setmonofont{Noto Sans TC}




% 全局字體設置
\renewcommand{\normalsize}{\fontsize{11pt}{15pt}\selectfont}
\renewcommand{\large}{\fontsize{14pt}{18pt}\selectfont}
\renewcommand{\Large}{\fontsize{16pt}{20pt}\selectfont}
\renewcommand{\huge}{\fontsize{20pt}{24pt}\selectfont}

% 數學字體設置與正文一致
%\everymath{\mathsf{\xdef\mysf{\mathgroup\the\mathgroup\relax}}\mysf}

% 設定頁面樣式
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[C]{\thepage}

% 設定段落間距
\setlength{\parskip}{0.5em}
\setlength{\parindent}{0em}

% 設定列表樣式
\setlist[enumerate]{leftmargin=*,labelsep=0.5em,topsep=0.3em,itemsep=0.2em}

% 定義顏色
\definecolor{answerframe}{RGB}{120,120,120}
\definecolor{answerback}{RGB}{248,248,248}
\definecolor{explanationframe}{RGB}{70,130,180}
\definecolor{explanationback}{RGB}{240,248,255}
\definecolor{roundtitle}{RGB}{50,50,50}
\definecolor{accent6}{RGB}{52,73,94} % Added accent color for question number box


% Command for shadowed rounded rectangle question number
\newcommand{\qnumShadowBox}[1]{%
  \tikz[remember picture]{
    \node[rectangle, rounded corners=3pt, fill=white, draw=accent6, drop shadow, inner sep=2pt] (qnum) {\bfseries #1};
  }
}

% 答案盒子模板
\tcbset{
    answer/.style={
        enhanced, % Needed for attach boxed title options
        colback=answerback,
        colframe=answerframe,
        arc=2mm, % Main box corner radius
        boxrule=0.5pt,
        % --- Title Box Settings ---
        attach boxed title to top left={yshift=0mm, xshift=0mm}, % Align top-left corners
        boxed title style={
            colback=white, % White background for title
            colframe=accent6, % Gray border for title
            arc=1mm, % Slightly smaller or equal radius for title box corners
            boxrule=0.5pt, % Match main box rule thickness
        },
        fonttitle=\bfseries\fontsize{9pt}{11pt}\selectfont, % Smaller bold title font
        coltitle=black, % Title text color
        % --- Padding ---
        left=2mm,
        % top=1.5em % Adjust top padding if needed later
    }
}

% 答案列表環境
\newenvironment{answerraster}{%
    \begin{tcbraster}[
        raster columns=3,
        raster column skip=0.4cm,
        raster row skip=0.3cm,
        raster left skip=0pt,
        raster right skip=0pt
    ]
}{%
    \end{tcbraster}
}


% 自定義環境
\newcommand{\answerbox}[2]{%
    \begin{tcolorbox}[
        answer,
        width=0.3\textwidth,
        text width=0.28\textwidth,
        title={#1}
    ]
        #2
    \end{tcolorbox}
}

% 定義 explanationbox 樣式
\tcbset{
    explanationstyle/.style={
        enhanced,
        breakable, % 允許盒子跨欄/頁
        colback=explanationback,
        colframe=explanationframe,
        arc=2mm,
        boxrule=0.5pt,
        fontupper=\fontsize{9pt}{11pt}\selectfont, % 設定內容字體為 9pt
        before skip=1em, % 控制盒子上方間距 (可調整)
        after skip=1em   % 控制盒子下方間距 (可調整)
    }
}
% 更新 explanationbox 命令以使用新樣式
\newcommand{\explanationbox}[1]{%
  \begin{tcolorbox}[explanationstyle]
    #1
  \end{tcolorbox}
}

% 回標題樣式
\newcommand{\roundtitle}[1]{%
    \begin{center}
        \colorbox{roundtitle!10}{%
            \begin{minipage}{0.95\textwidth}
                \centering\large\textbf{\textcolor{roundtitle}{#1}}
            \end{minipage}
        }
    \end{center}
    \vspace{0.5em}
}

% 設定標題樣式
\usepackage{titlesec}
\titleformat{\subsection}
  {\normalfont\large\bfseries}{\thesubsection}{1em}{}
\titlespacing*{\subsection}{0pt}{2em}{1em}

% 設定標題
\title{\huge 數學計算練習}
\author{\large 數學測驗生成器}
\date{\large \today}



\begin{document}
\begin{center}
{\Large \textbf{數學計算練習 - 詳解}}
\end{center}

\noindent 生成日期：2025-04-29\hfill

\subsection*{第1回詳解}

\begin{multicols}{2}
\begin{wrapfigure}{r}{0.4\linewidth}\vspace{-1em}\centering \resizebox{4cm}{!}{\begin{tikzpicture}[scale=1.2]
% 複合圖形
% 注意：此內容不包含 \begin{tikzpicture} 和 \end{tikzpicture}
% 變體: explanation

\usetikzlibrary{positioning}

  % 子圖形 coordinates (類型: coordinate_system)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 坐標系
    \usetikzlibrary{arrows.meta}
    
    \draw[-stealth, gray] (-1.2, 0) -- (1.2, 0);
    \draw[-stealth, gray] (0, -1.2) -- (0, 1.2);
    
  \end{scope}

  % 子圖形 circle (類型: circle)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 圓形
    \draw[thin, solid, black] (0.0, 0.0) circle (1.0);
    
  \end{scope}

  % 子圖形 origin (類型: point)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 點
    \fill[black] (0.0, 0.0) circle (0.03);
    
  \end{scope}

  % 子圖形 point (類型: point)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 點
    \fill[red] (0.4999999999999999, 0.8660254037844387) circle (0.03) node[above] {$P$};
    
  \end{scope}

  % 子圖形 radius (類型: line)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 線段
    \draw[thin, thick, red] (0.0, 0.0) -- (0.4999999999999999, 0.8660254037844387);
    
  \end{scope}

  % 子圖形 angle (類型: angle)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 角度
    \draw[thin, solid, blue] (0.0, 0.0) +(0.0:0.3) arc (0.0:60.0:0.3);
    
  \end{scope}

  % 子圖形 coord_label (類型: label)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 標籤
    \node[right, black] at (0.7999999999999998, 0.8660254037844387) {$(\frac{1}{2},\frac{\sqrt{3}}{2})$};
    
  \end{scope}

\end{tikzpicture}}\vspace{-0.5em}\end{wrapfigure}
\explanationbox{\textbf{1.} 
            因為 $cot \theta = \frac{1}{\tan \theta} = \frac{x}{y}$，即x座標除以y座標
            當 $\theta = 60^\circ$ 時，點的座標為 $(\frac{1}{2}, \frac{\sqrt{3}}{2})$
            所以 $cot(60^\circ) = \frac{\frac{1}{2}}{\frac{\sqrt{3}}{2}} = \frac{\sqrt{3}}{3}$
            }

\begin{wrapfigure}{r}{0.4\linewidth}\vspace{-1em}\centering \resizebox{4cm}{!}{\begin{tikzpicture}[scale=1.2]
% 複合圖形
% 注意：此內容不包含 \begin{tikzpicture} 和 \end{tikzpicture}
% 變體: explanation

\usetikzlibrary{positioning}

  % 子圖形 coordinates (類型: coordinate_system)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 坐標系
    \usetikzlibrary{arrows.meta}
    
    \draw[-stealth, gray] (-1.2, 0) -- (1.2, 0);
    \draw[-stealth, gray] (0, -1.2) -- (0, 1.2);
    
  \end{scope}

  % 子圖形 circle (類型: circle)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 圓形
    \draw[thin, solid, black] (0.0, 0.0) circle (1.0);
    
  \end{scope}

  % 子圖形 origin (類型: point)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 點
    \fill[black] (0.0, 0.0) circle (0.03);
    
  \end{scope}

  % 子圖形 point (類型: point)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 點
    \fill[red] (0.4999999999999999, 0.8660254037844387) circle (0.03) node[above] {$P$};
    
  \end{scope}

  % 子圖形 radius (類型: line)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 線段
    \draw[thin, thick, red] (0.0, 0.0) -- (0.4999999999999999, 0.8660254037844387);
    
  \end{scope}

  % 子圖形 angle (類型: angle)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 角度
    \draw[thin, solid, blue] (0.0, 0.0) +(0.0:0.3) arc (0.0:60.0:0.3);
    
  \end{scope}

  % 子圖形 coord_label (類型: label)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 標籤
    \node[right, black] at (0.7999999999999998, 0.8660254037844387) {$(\frac{1}{2},\frac{\sqrt{3}}{2})$};
    
  \end{scope}

\end{tikzpicture}}\vspace{-0.5em}\end{wrapfigure}
\explanationbox{\textbf{2.} 
            因為 $cot \theta = \frac{1}{\tan \theta} = \frac{x}{y}$，即x座標除以y座標
            當 $\theta = 60^\circ$ 時，點的座標為 $(\frac{1}{2}, \frac{\sqrt{3}}{2})$
            所以 $cot(60^\circ) = \frac{\frac{1}{2}}{\frac{\sqrt{3}}{2}} = \frac{\sqrt{3}}{3}$
            }

\begin{wrapfigure}{r}{0.4\linewidth}\vspace{-1em}\centering \resizebox{4cm}{!}{\begin{tikzpicture}[scale=1.2]
% 複合圖形
% 注意：此內容不包含 \begin{tikzpicture} 和 \end{tikzpicture}
% 變體: explanation

\usetikzlibrary{positioning}

  % 子圖形 coordinates (類型: coordinate_system)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 坐標系
    \usetikzlibrary{arrows.meta}
    
    \draw[-stealth, gray] (-1.2, 0) -- (1.2, 0);
    \draw[-stealth, gray] (0, -1.2) -- (0, 1.2);
    
  \end{scope}

  % 子圖形 circle (類型: circle)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 圓形
    \draw[thin, solid, black] (0.0, 0.0) circle (1.0);
    
  \end{scope}

  % 子圖形 origin (類型: point)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 點
    \fill[black] (0.0, 0.0) circle (0.03);
    
  \end{scope}

  % 子圖形 point (類型: point)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 點
    \fill[red] (-1.0, 0.0) circle (0.03) node[above left] {$P$};
    
  \end{scope}

  % 子圖形 radius (類型: line)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 線段
    \draw[thin, thick, red] (0.0, 0.0) -- (-1.0, 0.0);
    
  \end{scope}

  % 子圖形 angle (類型: angle)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 角度
    \draw[thin, solid, blue] (0.0, 0.0) +(0.0:0.3) arc (0.0:180.0:0.3);
    
  \end{scope}

  % 子圖形 coord_label (類型: label)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 標籤
    \node[left, black] at (-1.3, 0.0) {$(-1,0)$};
    
  \end{scope}

\end{tikzpicture}}\vspace{-0.5em}\end{wrapfigure}
\explanationbox{\textbf{3.} 
            因為 $cot \theta = \frac{1}{\tan \theta} = \frac{x}{y}$，即x座標除以y座標
            當 $\theta = 180^\circ$ 時，點的座標為 $(-1, 0)$
            所以 $cot(180^\circ) = \frac{-1}{0} = \tilde{\infty}$
            }

\begin{wrapfigure}{r}{0.4\linewidth}\vspace{-1em}\centering \resizebox{4cm}{!}{\begin{tikzpicture}[scale=1.2]
% 複合圖形
% 注意：此內容不包含 \begin{tikzpicture} 和 \end{tikzpicture}
% 變體: explanation

\usetikzlibrary{positioning}

  % 子圖形 coordinates (類型: coordinate_system)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 坐標系
    \usetikzlibrary{arrows.meta}
    
    \draw[-stealth, gray] (-1.2, 0) -- (1.2, 0);
    \draw[-stealth, gray] (0, -1.2) -- (0, 1.2);
    
  \end{scope}

  % 子圖形 circle (類型: circle)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 圓形
    \draw[thin, solid, black] (0.0, 0.0) circle (1.0);
    
  \end{scope}

  % 子圖形 origin (類型: point)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 點
    \fill[black] (0.0, 0.0) circle (0.03);
    
  \end{scope}

  % 子圖形 point (類型: point)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 點
    \fill[red] (-0.7071067811865476, -0.7071067811865476) circle (0.03) node[below] {$P$};
    
  \end{scope}

  % 子圖形 radius (類型: line)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 線段
    \draw[thin, thick, red] (0.0, 0.0) -- (-0.7071067811865476, -0.7071067811865476);
    
  \end{scope}

  % 子圖形 angle (類型: angle)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 角度
    \draw[thin, solid, blue] (0.0, 0.0) +(0.0:0.3) arc (0.0:225.0:0.3);
    
  \end{scope}

  % 子圖形 coord_label (類型: label)
  \begin{scope}[shift={(0.0, 0.0)}]
    % 標籤
    \node[left, black] at (-1.0071067811865475, -0.7071067811865476) {$(- \frac{\sqrt{2}}{2},- \frac{\sqrt{2}}{2})$};
    
  \end{scope}

\end{tikzpicture}}\vspace{-0.5em}\end{wrapfigure}
\explanationbox{\textbf{4.} 
            因為 $cos \theta = \frac{x}{r}$，即單位圓上點的x座標值
            當 $\theta = 225^\circ$ 時，點的座標為 $(- \frac{\sqrt{2}}{2}, - \frac{\sqrt{2}}{2})$
            所以 $cos(225^\circ) = - \frac{\sqrt{2}}{2}$
            }

\explanationbox{\textbf{5.} 預設題目：$\sin^{-1}(\frac{1}{2}) = 30^\circ$，因為 $\sin(30^\circ) = \sin(150^\circ) = \frac{1}{2}$ 但 $\sin^{-1}$ 的值域為 $[-90^\circ, 90^\circ]$，所以答案是 $30^\circ$。}

\explanationbox{\textbf{6.} 預設題目：$\sin^{-1}(\frac{1}{2}) = 30^\circ$，因為 $\sin(30^\circ) = \sin(150^\circ) = \frac{1}{2}$ 但 $\sin^{-1}$ 的值域為 $[-90^\circ, 90^\circ]$，所以答案是 $30^\circ$。}

\explanationbox{\textbf{7.} 預設題目：$\sin^{-1}(\frac{1}{2}) = 30^\circ$，因為 $\sin(30^\circ) = \sin(150^\circ) = \frac{1}{2}$ 但 $\sin^{-1}$ 的值域為 $[-90^\circ, 90^\circ]$，所以答案是 $30^\circ$。}

\explanationbox{\textbf{8.} 預設題目：$\sin^{-1}(\frac{1}{2}) = 30^\circ$，因為 $\sin(30^\circ) = \sin(150^\circ) = \frac{1}{2}$ 但 $\sin^{-1}$ 的值域為 $[-90^\circ, 90^\circ]$，所以答案是 $30^\circ$。}

\explanationbox{\textbf{9.} $\sqrt{2 \sqrt{154} + 29}$ \\ $= \sqrt{22+7 + 2\sqrt{22\cdot7}}$ \\ $= \sqrt{(\sqrt{22} + \sqrt{7})^2}$ \\ $= |\sqrt{22} + \sqrt{7}|$ \\ $= \sqrt{22} + \sqrt{7}$}

\explanationbox{\textbf{10.} $\sqrt{23 - 2 \sqrt{102}}$ \\ $= \sqrt{17+6 - 2\sqrt{17\cdot6}}$ \\ $= \sqrt{(\sqrt{17} - \sqrt{6})^2}$ \\ $= |\sqrt{17} - \sqrt{6}|$ \\ $= \sqrt{17} - \sqrt{6}$}

\explanationbox{\textbf{11.} $\sqrt{25 - 4 \sqrt{21}}$ \\ $= \sqrt{21+4 - 2\sqrt{21\cdot4}}$ \\ $= \sqrt{(\sqrt{21} - \sqrt{4})^2}$ \\ $= |\sqrt{21} - \sqrt{4}|$ \\ $= \sqrt{21} - \sqrt{4}$}

\explanationbox{\textbf{12.} $\sqrt{13 - 4 \sqrt{10}}$ \\ $= \sqrt{8+5 - 2\sqrt{8\cdot5}}$ \\ $= \sqrt{(\sqrt{8} - \sqrt{5})^2}$ \\ $= |\sqrt{8} - \sqrt{5}|$ \\ $= \sqrt{8} - \sqrt{5}$}

\end{multicols}

\vfill
\begin{center}
\small{生成日期：2025-04-29}
\end{center}
\end{document}
